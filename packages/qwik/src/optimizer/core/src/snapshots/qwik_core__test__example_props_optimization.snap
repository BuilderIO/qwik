---
source: packages/qwik/src/optimizer/core/src/test.rs
expression: output
---
==INPUT==


import { $, component$, useTask$ } from '@builder.io/qwik';

export const Works = component$(({count, stuff: hey, ...rest}) => {
    console.log(hey);
    useTask$(({track}) => {
        track(() => count);
        console.log(count, rest, hey);
    });
    return (
        <div class={count} {...rest}>{count}</div>
    );
});

export const NoWorks1 = component$(({count, stuff = 0}) => {
    console.log(stuff);
    useTask$(({track}) => {
        track(() => count);
        console.log(count);
    });
    return (
        <div class={count}>{count}</div>
    );
});

export const NoWorks2 = component$(({count, stuff: {hey}}) => {
    console.log(hey);
    useTask$(({track}) => {
        track(() => count);
        console.log(count);
    });
    return (
        <div class={count}>{count}</div>
    );
});

============================= test.js ==

import { _restProps } from "@builder.io/qwik";
import { componentQrl } from "@builder.io/qwik";
import { useTaskQrl } from "@builder.io/qwik";
import { useLexicalScope } from "@builder.io/qwik";
import { inlinedQrl } from "@builder.io/qwik";
import { _wrapSignal } from "@builder.io/qwik";
import { _IMMUTABLE } from "@builder.io/qwik";
import { jsx as _jsx } from "@builder.io/qwik/jsx-runtime";
export const Works = /*#__PURE__*/ componentQrl(inlinedQrl((props)=>{
    const rest = _restProps(props, [
        "count",
        "stuff"
    ]);
    console.log(props.stuff);
    useTaskQrl(inlinedQrl(({ track  })=>{
        const [props, rest] = useLexicalScope();
        track(()=>props.count);
        console.log(props.count, rest, props.stuff);
    }, "Works_component_useTask_pjo5U5Ikll0", [
        props,
        rest
    ]));
    return /*#__PURE__*/ _jsx("div", {
        get class () {
            return props.count;
        },
        ...rest,
        children: _wrapSignal(props, "count"),
        [_IMMUTABLE]: {
            class: _wrapSignal(props, "count")
        }
    });
}, "Works_component_t45qL4vNGv0"));
export const NoWorks1 = /*#__PURE__*/ componentQrl(inlinedQrl(({ count , stuff =0  })=>{
    console.log(stuff);
    useTaskQrl(inlinedQrl(({ track  })=>{
        const [count] = useLexicalScope();
        track(()=>count);
        console.log(count);
    }, "NoWorks1_component_useTask_37bweHaaACE", [
        count
    ]));
    return /*#__PURE__*/ _jsx("div", {
        class: count,
        children: count
    });
}, "NoWorks1_component_EGbSEls1pJc"));
export const NoWorks2 = /*#__PURE__*/ componentQrl(inlinedQrl(({ count , stuff: { hey  }  })=>{
    console.log(hey);
    useTaskQrl(inlinedQrl(({ track  })=>{
        const [count] = useLexicalScope();
        track(()=>count);
        console.log(count);
    }, "NoWorks2_component_useTask_lXiqwbxxjq0", [
        count
    ]));
    return /*#__PURE__*/ _jsx("div", {
        class: count,
        children: count
    });
}, "NoWorks2_component_JPD9t2HyEKg"));


Some("{\"version\":3,\"sources\":[\"/user/qwik/src/test.tsx\"],\"names\":[],\"mappings\":\"AACA;;;;;;;;AAEA,OAAO,MAAM,sBAAQ,wBAAW,SAAkC;;;;;IAC9D,QAAQ,GAAG,OAD0B;IAErC,sBAAS,CAAC,EAAC,MAAK,EAAC;;QACb,MAAM,UAHoB;QAI1B,QAAQ,GAAG,OAJe,OAIP,YAJc;;;;;IAMrC,qBACI,KAAC;YAAI;yBAPqB;;QAON,GAAG,IAAI;;;YAAtB,KAAK;;;AAElB,mCAAG;AAEH,OAAO,MAAM,yBAAW,wBAAW,CAAC,EAAC,MAAK,EAAE,OAAQ,EAAC,EAAC,GAAK;IACvD,QAAQ,GAAG,CAAC;IACZ,sBAAS,CAAC,EAAC,MAAK,EAAC;;QACb,MAAM,IAAM;QACZ,QAAQ,GAAG,CAAC;;;;IAEhB,qBACI,KAAC;QAAI,OAAO;kBAAQ;;AAE5B,sCAAG;AAEH,OAAO,MAAM,yBAAW,wBAAW,CAAC,EAAC,MAAK,EAAE,OAAO,EAAC,IAAG,EAAC,CAAA,EAAC,GAAK;IAC1D,QAAQ,GAAG,CAAC;IACZ,sBAAS,CAAC,EAAC,MAAK,EAAC;;QACb,MAAM,IAAM;QACZ,QAAQ,GAAG,CAAC;;;;IAEhB,qBACI,KAAC;QAAI,OAAO;kBAAQ;;AAE5B,sCAAG\"}")
== DIAGNOSTICS ==

[]
